<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Manager</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>

<body class="app-body">
  <div class="container-fluid px-4 py-4 app-shell">
    <header class="app-header mb-3">
      <div class="d-flex align-items-start justify-content-between gap-3">
        <div>
          <h1 class="app-title mb-1" data-i18n="app_title">Task Manager</h1>
        </div>

        <div class="d-flex align-items-center gap-2">
          <button id="lang-toggle" class="icon-btn" data-i18n-title="modal_login_title" title="Language">
            <span class="icon">üåê</span>
          </button>

          <button id="theme-toggle" class="icon-btn" title="Theme">
            <span class="icon">‚òÄÔ∏è</span>
          </button>

          <button id="login-btn" class="btn btn-outline-light btn-sm px-3" data-i18n="btn_login">Login</button>
          <button id="logout-btn" class="btn btn-outline-danger btn-sm px-3 d-none" data-i18n="btn_logout">Logout</button>
        </div>
      </div>

      <div class="divider mt-3"></div>
    </header>

    <main class="row g-4">
      <!-- LEFT: FORM -->
      <section class="col-12 col-lg-4">
        <div class="glass-card p-3 p-md-4">
          <h3 class="card-title mb-3" data-i18n="form_title">Create / Update Task</h3>

          <form id="task-form" class="vstack gap-3">
            <input type="hidden" id="task-id">

            <div>
              <label class="form-label" data-i18n="label_title">Title</label>
              <input id="title" class="form-control dark-input" placeholder="e.g. Prepare for defense" required>
            </div>

            <div>
              <label class="form-label" data-i18n="label_description">Description</label>
              <input id="description" class="form-control dark-input" placeholder="Short details...">
            </div>

            <div>
              <label class="form-label" data-i18n="label_status">Status</label>
              <select id="status" class="form-select dark-input">
                <option value="pending" data-i18n="status_pending">Pending</option>
                <option value="in-progress" data-i18n="status_in_progress">In Progress</option>
                <option value="done" data-i18n="status_done">Done</option>
              </select>
            </div>

            <div>
              <label class="form-label" data-i18n="label_priority">Priority</label>
              <select id="priority" class="form-select dark-input">
                <option value="low" data-i18n="priority_low">Low</option>
                <option value="medium" selected data-i18n="priority_medium">Medium</option>
                <option value="high" data-i18n="priority_high">High</option>
              </select>
            </div>

            <div>
              <label class="form-label" data-i18n="label_due_date">Due date</label>
              <input id="dueDate" type="date" class="form-control dark-input">
            </div>

            <div>
              <label class="form-label" data-i18n="label_category">Category</label>
              <input id="category" class="form-control dark-input" value="general" placeholder="All categories" data-i18n-placeholder="filter_category_label">
            </div>

            <div>
              <label class="form-label" data-i18n="label_tags">Tags (comma separated)</label>
              <input id="tags" class="form-control dark-input" placeholder="uni, exam, urgent" data-i18n-placeholder="filter_tags_label">
            </div>

            <div class="d-flex gap-2 pt-2">
              <button class="btn btn-primary btn-save flex-grow-1" id="save-btn" data-i18n="btn_save">Save</button>
              <button type="button" class="btn btn-outline-secondary d-none" id="cancel-edit" data-i18n="btn_cancel">Cancel</button>
            </div>

            <div class="hint mt-2">
              <span class="hint-dot"></span>
              <span class="hint-text" data-i18n="hint_login_required">Create/Update/Delete require login.</span>
            </div>
          </form>
        </div>
      </section>

      <!-- RIGHT: LIST + FILTERS -->
      <section class="col-12 col-lg-8">
        <div class="glass-card p-3 p-md-4">
          <div class="d-flex align-items-center justify-content-between mb-3">
            <h3 class="card-title mb-0" data-i18n="tasks_title">Tasks</h3>
          </div>

          <!-- Filters row -->
          <div class="row g-3 align-items-end mb-3">
            <div class="col-12 col-md-4">
              <label class="form-label" data-i18n="sort_by_label">Sort by (field & order)</label>
              <select id="filter-sort" class="form-select dark-input">
                <option value="newest" selected>Created: Newest first</option>
                <option value="oldest">Created: Oldest first</option>
                <option value="title_asc">Title: A ‚Üí Z</option>
                <option value="title_desc">Title: Z ‚Üí A</option>
                <option value="priority_asc">Priority: Low ‚Üí High</option>
                <option value="priority_desc">Priority: High ‚Üí Low</option>
                <option value="status_asc">Status: Pending ‚Üí Done</option>
                <option value="status_desc">Status: Done ‚Üí Pending</option>
                <option value="due_asc">Due date: Earliest first</option>
                <option value="due_desc">Due date: Latest first</option>
                <option value="category_asc">Category: A ‚Üí Z</option>
                <option value="category_desc">Category: Z ‚Üí A</option>
                <option value="tags_count_desc">Tags: Most ‚Üí Fewest</option>
              </select>
            </div>

            <div class="col-12 col-md-4">
              <label class="form-label" data-i18n="filter_status_label">Status</label>
              <select id="filter-status" class="form-select dark-input">
                <option value="" selected data-i18n="all_statuses">All statuses</option>
                <option value="pending" data-i18n="status_pending">Pending</option>
                <option value="in-progress" data-i18n="status_in_progress">In Progress</option>
                <option value="done" data-i18n="status_done">Done</option>
              </select>
            </div>

            <div class="col-12 col-md-4">
              <label class="form-label" data-i18n="filter_priority_label">Priority</label>
              <select id="filter-priority" class="form-select dark-input">
                <option value="" selected data-i18n="all_priorities">All priorities</option>
                <option value="low" data-i18n="priority_low">Low</option>
                <option value="medium" data-i18n="priority_medium">Medium</option>
                <option value="high" data-i18n="priority_high">High</option>
              </select>
            </div>

            <div class="col-12 col-md-4">
              <label class="form-label" data-i18n="filter_category_label">Category</label>
              <input id="filter-category" class="form-control dark-input" placeholder="All categories" data-i18n-placeholder="filter_category_label">
            </div>

            <div class="col-12 col-md-4">
              <label class="form-label" data-i18n="filter_tags_label">Tags</label>
              <input id="filter-tags" class="form-control dark-input" placeholder="Search tags" data-i18n-placeholder="filter_tags_label">
            </div>

            <div class="col-12 col-md-4">
              <button id="reset-filters" class="btn btn-outline-light w-100" data-i18n="reset_filters">Reset filters</button>
            </div>
          </div>

          <!-- Table -->
          <div class="table-responsive">
            <table class="table table-dark table-hover align-middle task-table">
              <thead>
                <tr>
                  <th style="min-width: 140px;" data-i18n="label_title">Title</th>
                  <th data-i18n="label_status">Status</th>
                  <th data-i18n="label_priority">Priority</th>
                  <th data-i18n="label_due_date">Due</th>
                  <th data-i18n="label_category">Category</th>
                  <th style="min-width: 160px;" data-i18n="label_tags">Tags</th>
                  <th class="text-end" style="min-width: 170px;">Actions</th>
                </tr>
              </thead>
              <tbody id="tasks-table-body"></tbody>
            </table>
          </div>

          <div id="empty-state" class="empty-state d-none" data-i18n="empty_state_text">
            No tasks yet. Create your first task.
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Login Modal -->
  <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content modal-dark">
        <div class="modal-header">
          <h5 class="modal-title" data-i18n="modal_login_title">Login</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-2">
            <label class="form-label" data-i18n="modal_email_label">Email</label>
            <input id="login-email" class="form-control dark-input" value="admin@example.com">
          </div>
          <div>
            <label class="form-label" data-i18n="modal_password_label">Password</label>
            <input id="login-password" type="password" class="form-control dark-input" value="admin123">
          </div>
          <div class="mt-3 small text-muted" data-i18n="demo_credentials_text">
            Demo credentials: admin@example.com / admin123
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal" data-i18n="btn_cancel">Cancel</button>
          <button type="button" id="do-login" class="btn btn-primary" data-i18n="btn_login">Login</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/i18n.js"></script>
  <script src="/script.js"></script>
</body>
</html>
